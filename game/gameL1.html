<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sight Words Game</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Fredoka', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }
    
    .game-container {
      background: white;
      border-radius: 30px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      padding: 40px;
      max-width: 600px;
      animation: slideIn 0.5s ease-out;
    }
    
    @keyframes slideIn {
      from { transform: translateY(30px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    
    .letter {
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
      color: white;
      font-size: 2.5rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 20px;
      cursor: grab;
      user-select: none;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(251, 191, 36, 0.4);
      text-transform: uppercase;
    }
    
    .letter:hover {
      transform: scale(1.15) rotate(5deg);
      box-shadow: 0 6px 20px rgba(251, 191, 36, 0.6);
    }
    
    .letter:active {
      cursor: grabbing;
      transform: scale(0.95);
    }
    
    .dropzone {
      min-width: 80px;
      min-height: 80px;
      border: 3px dashed #d1d5db;
      border-radius: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 5px;
      background: #f9fafb;
      transition: all 0.3s ease;
      font-size: 2.5rem;
      font-weight: 700;
      text-transform: uppercase;
    }
    
    .dropzone:hover {
      background: #e5e7eb;
      border-color: #9ca3af;
    }
    
    .dropzone.filled {
      border-style: solid;
      background: linear-gradient(135deg, #34d399 0%, #10b981 100%);
      color: white;
      font-weight: 700;
      border-color: #10b981;
      animation: pop 0.4s ease;
    }
    
    @keyframes pop {
      0% { transform: scale(0.8); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
    
    .word-container {
      display: flex;
      margin-bottom: 30px;
      justify-content: center;
    }
    
    .title {
      background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-weight: 700;
      font-size: 2.5rem;
      text-align: center;
      margin-bottom: 30px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }
    
    .btn {
      background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
      color: white;
      padding: 15px 40px;
      border-radius: 50px;
      font-size: 1.25rem;
      font-weight: 700;
      border: none;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
    }
    
    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(139, 92, 246, 0.6);
    }
    
    .btn:active {
      transform: translateY(0);
    }
    
    .star {
      position: fixed;
      width: 3px;
      height: 3px;
      background: white;
      border-radius: 50%;
      animation: twinkle 2s infinite;
    }
    
    @keyframes twinkle {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 1; }
    }
    
    .celebration {
      position: fixed;
      font-size: 3rem;
      pointer-events: none;
      animation: celebrate 1s ease-out;
    }
    
    @keyframes celebrate {
      0% { transform: translateY(0) scale(0); opacity: 1; }
      100% { transform: translateY(-100px) scale(1.5); opacity: 0; }
    }
    
    .instruction {
      text-align: center;
      color: #6b7280;
      font-size: 1.1rem;
      margin-bottom: 20px;
      font-weight: 500;
    }
    
    .speaker-btn {
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
      margin: 20px auto;
    }
    
    .speaker-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 20px rgba(59, 130, 246, 0.6);
    }
    
    .speaker-btn:active {
      transform: scale(0.95);
    }
  </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4">
  <!-- Background Stars -->
  <div id="stars"></div>

  <div class="game-container">
    <h1 class="title">üåü Spell the Word! üåü</h1>

    <!-- Speaker Button -->
    <div class="speaker-btn" id="speakWordBtn" title="Hear the word">
      <svg width="30" height="30" viewBox="0 0 24 24" fill="white">
        <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
      </svg>
    </div>

    <p class="instruction">Drag the letters to spell the word!</p>
<p id="feedback" class="text-center text-red-600 font-bold text-xl mb-4 hidden">Try Again!</p>

    <div id="game" class="flex flex-col items-center gap-6">
      <!-- Word Dropzone -->
      <div class="word-container" id="dropzones"></div>

      <!-- Letters -->
      <div class="flex gap-4 flex-wrap justify-center" id="letters"></div>

      <button id="nextBtn" class="btn mt-4">Next Word üéØ</button>
    </div>
  </div>

  <script>
    const words = ["cat", "dog", "sun", "hat", "big", "bag", "fun", "run", "red", "bed"];
    let currentWordIndex = 0;

    const dropzonesContainer = document.getElementById("dropzones");
    const lettersContainer = document.getElementById("letters");
    const nextBtn = document.getElementById("nextBtn");
    const speakWordBtn = document.getElementById("speakWordBtn");

    // üîä Speak using Kevin MP3 files
    function speak(text, rate = 0.8) {
      const cleanedText = text.toLowerCase().replace(/[^a-z]/g, '');
      const fileName = `kevin-${cleanedText}.mp3`;
      const audio = new Audio(`sounds/${fileName}`);
      audio.play().catch((e) => {
        console.warn(`Audio file not found: ${fileName}`, e);
      });
    }

    // üå† Background stars
    const starsContainer = document.getElementById('stars');
    for (let i = 0; i < 50; i++) {
      const star = document.createElement('div');
      star.className = 'star';
      star.style.left = Math.random() * 100 + '%';
      star.style.top = Math.random() * 100 + '%';
      star.style.animationDelay = Math.random() * 2 + 's';
      starsContainer.appendChild(star);
    }

    // üåÄ Shuffle array
    function shuffle(array) {
      const arr = [...array];
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    // üéâ Celebration
    function celebrate() {
      const emojis = ['üéâ', '‚≠ê', 'üåü', '‚ú®', 'üéä', 'üèÜ'];
      for (let i = 0; i < 6; i++) {
        setTimeout(() => {
          const celebration = document.createElement('div');
          celebration.className = 'celebration';
          celebration.textContent = emojis[Math.floor(Math.random() * emojis.length)];
          celebration.style.left = Math.random() * window.innerWidth + 'px';
          celebration.style.top = Math.random() * window.innerHeight + 'px';
          document.body.appendChild(celebration);
          setTimeout(() => celebration.remove(), 1000);
        }, i * 100);
      }
    }

  function loadWord() {
  document.getElementById('feedback').classList.add('hidden');

  dropzonesContainer.innerHTML = "";
  lettersContainer.innerHTML = "";
  const word = words[currentWordIndex];

  // Disable Next button at the start
  nextBtn.disabled = true;
  nextBtn.classList.add('opacity-50', 'cursor-not-allowed');

  setTimeout(() => speak(word, 0.6), 300);

  // rest of your function...


      // Drop zones
      for (let i = 0; i < word.length; i++) {
        const dz = document.createElement('div');
        dz.className = "dropzone";
        dz.dataset.index = i;
        dz.dataset.expectedLetter = word[i];
        dz.addEventListener('dragover', e => e.preventDefault());
        dz.addEventListener('drop', e => handleDrop(e, dz));
        dropzonesContainer.appendChild(dz);
      }

      // Letters
      const shuffled = shuffle(word.split(''));
      shuffled.forEach(l => {
        const letterDiv = document.createElement('div');
        letterDiv.className = "letter";
        letterDiv.textContent = l;
        letterDiv.draggable = true;
        letterDiv.dataset.letter = l;
        letterDiv.addEventListener('dragstart', e => {
          e.dataTransfer.setData("text", l);
          speak(l, 0.8);
        });
        lettersContainer.appendChild(letterDiv);
      });
    }

    function handleDrop(e, dz) {
      e.preventDefault();
      const letter = e.dataTransfer.getData("text");
      const draggedEl = document.querySelector(`.letter[data-letter='${letter}'][draggable='true']`);
      
      if (draggedEl && !dz.classList.contains('filled')) {
        dz.textContent = letter;
        dz.classList.add('filled');
        draggedEl.remove();
        speak(letter, 0.8);
        checkWordComplete();
      }
    }

function checkWordComplete() {
  const dzs = Array.from(dropzonesContainer.children);
  if (!dzs.some(dz => !dz.classList.contains('filled'))) {
    const completeWord = dzs.map(dz => dz.textContent).join('');
    const expectedWord = words[currentWordIndex];

    setTimeout(() => {
    if (completeWord === expectedWord) {
  celebrate();
  speak(expectedWord, 0.8);

  setTimeout(() => {
    speak(`greatjobyouspelled${expectedWord}`, 0.7);
  }, 1500);

  // ‚úÖ Replace dropzones with static display
  dropzonesContainer.innerHTML = "";
  for (let char of expectedWord) {
    const confirmedLetter = document.createElement('div');
    confirmedLetter.className = "dropzone filled";
    confirmedLetter.textContent = char;
    dropzonesContainer.appendChild(confirmedLetter);
  }

  // ‚úÖ Clear letters
  lettersContainer.innerHTML = "";

  // ‚úÖ Hide feedback
  document.getElementById('feedback').classList.add('hidden');

  // ‚úÖ Enable Next button
  nextBtn.disabled = false;
  nextBtn.classList.remove('opacity-50', 'cursor-not-allowed');
}
 else {
        speak("tryagain", 0.7);
        document.getElementById('feedback').classList.remove('hidden');

        dzs.forEach(dz => {
          if (dz.textContent) {
            const letter = dz.textContent;
            dz.textContent = "";
            dz.classList.remove('filled');

            const letterDiv = document.createElement('div');
            letterDiv.className = "letter";
            letterDiv.textContent = letter;
            letterDiv.draggable = true;
            letterDiv.dataset.letter = letter;
            letterDiv.addEventListener('dragstart', e => {
              e.dataTransfer.setData("text", letter);
              speak(letter, 0.8);
            });
            lettersContainer.appendChild(letterDiv);
          }
        });
      }
    }, 500);
  }
}




    // üîä Replay word
    speakWordBtn.addEventListener('click', () => {
      speak(words[currentWordIndex], 0.6);
    });

    // ‚û°Ô∏è Next word
   nextBtn.addEventListener('click', () => {
  currentWordIndex++;

  if (currentWordIndex >= words.length) {
    showGameOver();
  } else {
    loadWord();
  }
});

    // üöÄ Start
    loadWord();
    
  </script>
</body>

</html>