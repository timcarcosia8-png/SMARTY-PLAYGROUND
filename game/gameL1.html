<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sight Words Game</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Fredoka One', cursive;
      background: #fef9f9;
    }
    .letter {
      width: 60px;
      height: 60px;
      background: #fbbf24;
      color: white;
      font-size: 2rem;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 12px;
      cursor: grab;
      user-select: none;
      transition: transform 0.2s;
    }
    .letter:hover {
      transform: scale(1.1);
    }
    .dropzone {
      min-width: 60px;
      min-height: 60px;
      border: 2px dashed #9ca3af;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 5px;
    }
    .dropzone.filled {
      border-style: solid;
      background: #34d399;
      color: white;
      font-weight: bold;
    }
    .word-container {
      display: flex;
      margin-bottom: 20px;
    }
  </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4">

  <h1 class="text-3xl font-bold mb-6 text-purple-700">Sight Words Game</h1>

  <div id="game" class="flex flex-col items-center gap-6">
    <!-- Word Dropzone -->
    <div class="word-container" id="dropzones">
      <!-- JS will generate drop zones -->
    </div>

    <!-- Letters -->
    <div class="flex gap-4 flex-wrap" id="letters">
      <!-- JS will generate draggable letters -->
    </div>

    <button id="nextBtn" class="mt-4 px-6 py-3 bg-purple-600 text-white rounded-full text-lg font-bold hover:bg-purple-700">Next Word</button>
  </div>

  <script>
    // Words for the game
    const words = ["cat", "dog", "sun", "hat", "big", "bag"];
    let currentWordIndex = 0;

    const dropzonesContainer = document.getElementById("dropzones");
    const lettersContainer = document.getElementById("letters");
    const nextBtn = document.getElementById("nextBtn");

    function speak(text) {
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = 'en-US';
      utterance.rate = 0.8;
      utterance.pitch = 1;
      speechSynthesis.speak(utterance);
    }

    function shuffle(array) {
      return array.sort(() => Math.random() - 0.5);
    }

    function loadWord() {
      dropzonesContainer.innerHTML = "";
      lettersContainer.innerHTML = "";
      const word = words[currentWordIndex];

      // Create drop zones
      for(let i=0;i<word.length;i++){
        const dz = document.createElement('div');
        dz.className = "dropzone";
        dz.dataset.index = i;
        dz.addEventListener('dragover', e => e.preventDefault());
        dz.addEventListener('drop', e => handleDrop(e, dz));
        dropzonesContainer.appendChild(dz);
      }

      // Create letters (shuffled)
      const shuffled = shuffle(word.split(''));
      shuffled.forEach(l => {
        const letterDiv = document.createElement('div');
        letterDiv.className = "letter";
        letterDiv.textContent = l;
        letterDiv.draggable = true;
        letterDiv.dataset.letter = l;
        letterDiv.addEventListener('dragstart', () => speak(l));
        lettersContainer.appendChild(letterDiv);
      });
    }

    function handleDrop(e, dz) {
      e.preventDefault();
      const letter = e.dataTransfer.getData("text");
      const draggedEl = document.querySelector(`.letter[data-letter='${letter}']`);
      if(draggedEl){
        dz.textContent = letter;
        dz.classList.add('filled');
        draggedEl.remove();

        checkWordComplete();
      }
    }

    function checkWordComplete() {
      const dzs = Array.from(dropzonesContainer.children);
      const completeWord = dzs.map(dz => dz.textContent).join('');
      if(!dzs.some(dz => dz.textContent === "")){
        speak(completeWord);
      }
    }

    // Drag & drop setup
    lettersContainer.addEventListener('dragstart', e => {
      e.dataTransfer.setData("text", e.target.dataset.letter);
    });

    nextBtn.addEventListener('click', () => {
      currentWordIndex = (currentWordIndex + 1) % words.length;
      loadWord();
    });

    // Initial load
    loadWord();
  </script>

</body>
</html>
